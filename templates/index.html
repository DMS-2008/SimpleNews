<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Todays Voice</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body class="home">
  <header>
    <div class="container">
      <h1>Todays Voice</h1>
      <nav>
        <a href="#">Home</a>
        <a href="politics.html">Politics</a>
        <a href="technology.html">Technology</a>
        <a href="sports.html">Sports</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
    <div class="signin-div">
      <a class="signin-button" href="login.html">Sign In</a>
    </div>
  </header>

  <!-- Smooth Dynamic Breaking News Ticker -->
  <div class="news-bar">
    <div class="marquee-content" id="news-bar"></div>
  </div>

  <!-- Hero Section: Show first headline dynamically -->
<div class="top-cards">  <!-- NEW WRAPPER -->
  <div class="hero-text">
    <span class="breaking-label">BREAKING</span>
    <h2 class="hero-breaking" id="hero-breaking">Loading latest news...</h2>
    <p class="hero-description" id="hero-description"></p>
  </div>

  <div class="wheather">
    <h2>Check Weather</h2>
    <form class="weather-form" method="POST">
      <input type="text" name="city" placeholder="Enter city name" required>
      <button type="submit">Search</button>
    </form>
  </div>
</div>


  <section class="news-section container">
    <h2>Latest Headlines</h2>
    <div class="news-grid">
      <article>
        <img src="{{ url_for('static', filename='images/politics.jpg') }}" alt="Politics">
        <h3>New Bill Passed in Parliament</h3>
        <p>The government has successfully passed a new bill focusing on reforms...</p>
      </article>
      <article>
        <img src="{{ url_for('static', filename='images/tech.jpg') }}" alt="Technology">
        <h3>AI Revolution in Smartphones</h3>
        <p>The tech world is buzzing with the launch of a new AI-powered smartphone...</p>
      </article>
      <article>
        <img src="{{ url_for('static', filename='images/sports.jpg') }}" alt="sports">
        <h3>India Clinches Cricket Victory</h3>
        <p>Team India secures a thrilling win against Australia in a last-over showdown...</p>
      </article>
    </div>
  </section>



  <footer>
    <p>&copy; 2025 Todays Voice. Designed by Batch5.</p>
  </footer>

  <script>
    // Fetch and display dynamic breaking news
  async function fetchNews() {
  try {
    const response = await fetch('/get_news');
    const data = await response.json();
    const newsList = data.news; // array of objects
    const newsBar = document.getElementById('news-bar');
    const heroBreaking = document.getElementById('hero-breaking');
    const heroDescription = document.getElementById('hero-description');

    // Clear previous news
    newsBar.innerHTML = '';

    newsList.forEach((news, index) => {
      // Show first headline in hero
      if (index === 0) {
        heroBreaking.textContent = news.title || 'No Title';
        heroDescription.textContent = news.description || '';
      }

      const span = document.createElement('span');
      span.className = 'news-item';
      span.textContent = news.title || 'No Title'; // use title
      newsBar.appendChild(span);
    });
  } catch (error) {
    console.error('Error fetching news:', error);
  }
}


    // Initial fetch
    fetchNews();
    // Refresh every 60 seconds
    setInterval(fetchNews, 60000);

    // Scroll Animations for articles
    const articles = document.querySelectorAll(".news-grid article");
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });

    articles.forEach(article => observer.observe(article));
  </script>
</body>

</html>
