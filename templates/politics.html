<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Politics - Todays Voice</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Highlight active nav link
            document.querySelectorAll('nav a').forEach(link => {
                if (link.getAttribute('href') === 'politics.html') {
                    link.classList.add('active');
                }
            });

            // Animate articles
            document.querySelectorAll('.news-grid article').forEach((a, i) => {
                a.style.animationPlayState = 'running';
            });

            // Fetch and display politics news dynamically
            async function fetchPoliticsNews() {
                try {
                    const response = await fetch('/get_news?category=politics'); // Add category param
                    const data = await response.json();
                    const newsList = data.news;
                    const newsGrid = document.querySelector('.news-grid');

                    // Clear old articles
                    newsGrid.innerHTML = '';

                    newsList.forEach((news, index) => {
                        const article = document.createElement('article');

                        const img = document.createElement('img');
                        img.src = news.image || '{{ url_for("static", filename="images/politics.jpg") }}';
                        img.alt = 'Politics';
                        article.appendChild(img);

                        const h3 = document.createElement('h3');
                        h3.textContent = news.title || 'No Title';
                        article.appendChild(h3);

                        const p = document.createElement('p');
                        p.textContent = news.description || '';
                        article.appendChild(p);

                        newsGrid.appendChild(article);
                    });
                } catch (error) {
                    console.error('Error fetching politics news:', error);
                }
            }

            fetchPoliticsNews();
        });
    </script>
</head>

<body class="politics">
    <header>
        <div class="container">
            <h1>Todays Voice</h1>
            <nav>
                <a href="index.html">Home</a>
                <a href="politics.html">Politics</a>
                <a href="technology.html">Technology</a>
                <a href="sports.html">Sports</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
            </nav>
        </div>
    </header>

    <!-- News Section -->
    <section class="news-section container">
        <h2>Politics</h2>
        <div class="news-grid">
            <!-- Articles will be dynamically injected here by JS -->
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Todays Voice. Designed by Batch5.</p>
    </footer>
</body>

</html>
